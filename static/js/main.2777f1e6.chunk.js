(this["webpackJsonpsnake-game"]=this["webpackJsonpsnake-game"]||[]).push([[0],{12:function(e,t,c){},21:function(e,t,c){},22:function(e,t,c){},23:function(e,t,c){},25:function(e,t,c){},26:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),a=c(13),s=c.n(a),o=(c(21),c(3)),l=c(2),i=c(8),u=c(9);c(22);var j=c(14),b=c(15),d=c(16),O=function(e){Object(j.a)(c,e);var t=Object(b.a)(c);function c(){var e;Object(i.a)(this,c);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).getHead=function(){return e.length>0?e[e.length-1]:null},e.getTail=function(){return e.length>0?e[0]:null},e.addHead=function(t){return e.push(t)},e.removeTail=function(){return e.shift()},e}return c}(Object(d.a)(Array)),f=(c(23),c(0)),v=function(e){return e.isOpen&&Object(f.jsx)("div",{className:"modal",children:Object(f.jsx)("div",{className:"modal-content",children:e.children})})},h="UP",w="RIGHT",x="DOWN",m="LEFT",S=function(e){var t=e.length,c=e[0].length,n=Math.round(t/3),r=Math.round(c/3);return{row:n,col:r,cell:e[n][r]}},g=function(e){var t=function(e){for(var t=1,c=[],n=0;n<e;n++){for(var r=[],a=0;a<e;a++)r.push(t++);c.push(r)}return c}(e.boardSize),c=Object(n.useState)(new O(S(t))),r=Object(l.a)(c,2),a=r[0],s=r[1],i=Object(n.useState)(new Set([a.getHead().cell])),j=Object(l.a)(i,2),b=j[0],d=j[1],g=Object(n.useState)(w),p=Object(l.a)(g,2),N=p[0],k=p[1],E=Object(n.useState)(a.getHead().cell+5),H=Object(l.a)(E,2),y=H[0],A=H[1],C=Object(n.useState)(0),I=Object(l.a)(C,2),M=I[0],T=I[1],L=Object(n.useState)(!1),R=Object(l.a)(L,2),D=R[0],P=R[1],z=Object(n.useState)(Math.max(1e3-50*(e.speed-1),10)),W=Object(l.a)(z,1)[0],U=Object(n.useState)(e.hasWall),F=Object(l.a)(U,1)[0],G=Object(n.useState)(!1),B=Object(l.a)(G,2),J=B[0],K=B[1],Y=Object(n.useState)(!1),_=Object(l.a)(Y,2),q=_[0],Q=_[1],V=Object(n.useCallback)((function(){var e=S(t);s(new O(e)),d(new Set([e.cell])),k(w),A(e.cell+5),T(0)}),[t]),X=Object(n.useCallback)((function(e){var c=e===h?{row:a.getHead().row-1,col:a.getHead().col}:e===w?{row:a.getHead().row,col:a.getHead().col+1}:e===x?{row:a.getHead().row+1,col:a.getHead().col}:e===m?{row:a.getHead().row,col:a.getHead().col-1}:{row:a.getHead().row,col:a.getHead().col};return F?c:{row:c.row<0?t.length-1:c.row>=t.length?0:c.row,col:c.col<0?t[0].length-1:c.col>=t[0].length?0:c.col}}),[a,t,F]),Z=Object(n.useCallback)((function(e){var c=e.row,n=e.col;return c<0||n<0||c>=t.length||n>=t[0].length}),[t]),$=Object(n.useCallback)((function(e){return b.has(e)?"cell snake-cell":e===y?"cell food-cell":"cell"}),[y,b]),ee=Object(n.useCallback)((function(e){if(null!==e){var c=X(e);!Z(c)&&a.length>1&&a[a.length-2].cell===t[c.row][c.col]||k(e)}}),[t,X,Z,a]);Object(n.useEffect)((function(){var t=function(t){var c;"Enter"===t.key?(P(!D),q&&V(),K(!J)):"Escape"===t.key?e.viewHandler():D||ee("ArrowUp"===(c=t.key)?h:"ArrowRight"===c?w:"ArrowDown"===c?x:"ArrowLeft"===c?m:null)};return window.addEventListener("keydown",t),function(){return window.removeEventListener("keydown",t)}}),[t,D,N,b.size,J,q,V,ee,e]),Object(n.useEffect)((function(){M>e.topScore&&e.topScoreHandler(M)}),[M,e]),function(e,t){var c=Object(n.useRef)();Object(n.useEffect)((function(){c.current=e}),[e]),Object(n.useEffect)((function(){if(null!==t){var e=setInterval((function(){c.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){te()}),D?null:W);var te=function(){var e=X(N);if(Z(e)||b.has(t[e.row][e.col]))ne();else{var c=t[e.row][e.col],n=Object(u.a)(O,Object(o.a)(a));n.addHead({row:e.row,col:e.col,cell:c});var r=new Set(b);r.add(c),c!==y?(r.delete(a.getTail().cell),n.removeTail()):ce(r),s(n),d(r)}},ce=function(t){for(var c=Math.pow(e.boardSize,2),n=null;null===n||t.has(n);)n=Math.floor(Math.random()*c+1);A(n),T((function(e){return e+1}))},ne=function(){P(!0),Q(!0),K(!0)},re=function(e){ee(e)};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"board",children:[t.map((function(e,t){return Object(f.jsx)("div",{className:"row",children:e.map((function(e,t){return Object(f.jsx)("div",{className:$(e)},t)}))},t)})),Object(f.jsxs)("div",{className:"score-row",children:[Object(f.jsx)("div",{className:"score-cell",children:Object(f.jsxs)("span",{children:["Score: ",M]})}),Object(f.jsx)("div",{className:"score-cell",children:Object(f.jsxs)("span",{children:["Top Score: ",e.topScore]})})]})]}),Object(f.jsxs)("div",{className:"button-container",children:[Object(f.jsx)("div",{className:"button-sub-container",children:Object(f.jsx)("button",{className:"button-direction",onClick:function(){return re(h)},children:Object(f.jsx)("div",{className:"button-arrow button-up"})})}),Object(f.jsxs)("div",{className:"button-sub-container",children:[Object(f.jsx)("button",{className:"button-direction",onClick:function(){return re(m)},children:Object(f.jsx)("div",{className:"button-arrow button-left"})}),Object(f.jsx)("button",{className:"button-direction",onClick:function(){return re(x)},children:Object(f.jsx)("div",{className:"button-arrow button-down"})}),Object(f.jsx)("button",{className:"button-direction",onClick:function(){return re(w)},children:Object(f.jsx)("div",{className:"button-arrow button-right"})})]})]}),Object(f.jsx)(v,{isOpen:J,children:Object(f.jsxs)("div",{children:[Object(f.jsx)("br",{}),q&&Object(f.jsxs)("h3",{children:["Your score: ",M]}),Object(f.jsxs)("h3",{children:["Press ENTER to ",q?"Restart":"Resume","."]}),Object(f.jsx)("h3",{children:"Press ESC to End."}),Object(f.jsx)("br",{})]})})]})},p=(c(12),function(e){var t,c=Object(n.useState)(null!==(t=e.current)&&void 0!==t?t:0),r=Object(l.a)(c,1)[0];return Object(n.useEffect)((function(){var t=function(t){if(e.isSelected&&e.values)if("ArrowLeft"===t.key){if(0===r)return;e.action(r-1)}else if("ArrowRight"===t.key){if(r===e.values.length-1)return;e.action(r+1)}};return window.addEventListener("keydown",t),function(){return window.removeEventListener("keydown",t)}}),[r,e]),void 0===e.values?Object(f.jsx)("div",{className:"item ".concat(e.isSelected?"selected-item":""),children:Object(f.jsx)("span",{children:e.text})}):Object(f.jsxs)("div",{className:"item value-item ".concat(e.isSelected?"selected-item":""),children:[Object(f.jsx)("div",{className:"value-item-cell",children:Object(f.jsx)("span",{children:e.text})}),Object(f.jsxs)("div",{className:"value-item-cell",children:[Object(f.jsx)("div",{className:e.isSelected&&r>0?"arrow-left":""}),Object(f.jsx)("span",{className:"value-item-value",children:e.values[r].text}),Object(f.jsx)("div",{className:e.isSelected&&r<e.values.length-1?"arrow-right":""})]})]})}),N="MAIN",k="SETTINGS",E=function(e){var t=Object(n.useCallback)((function(t){return[{text:"Start",action:e.viewHandler},{text:"Settings",action:function(){x(k),i(0)}},{text:"Help",action:function(){return d(!t)}}]}),[e.viewHandler]),c=Object(n.useCallback)((function(){return[].concat(Object(o.a)(e.settingItems),[{text:"Done",action:function(){x(N),i(1)}}])}),[e.settingItems]),r=Object(n.useState)(0),a=Object(l.a)(r,2),s=a[0],i=a[1],u=Object(n.useState)(!1),j=Object(l.a)(u,2),b=j[0],d=j[1],O=Object(n.useState)(N),h=Object(l.a)(O,2),w=h[0],x=h[1],m=Object(n.useState)(t(b)),S=Object(l.a)(m,2),g=S[0],E=S[1],H=Object(n.useState)(c()),y=Object(l.a)(H,1)[0];return Object(n.useEffect)((function(){E(t(b))}),[t,b]),Object(n.useEffect)((function(){var e=function(e){var t=w===N?g:y;if("Enter"===e.key)t[s].action();else if(!b)if("ArrowUp"===e.key){if(0===s)return;i((function(e){return e-1}))}else if("ArrowDown"===e.key){if(s===t.length-1)return;i(s+1)}};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[s,w,g,y,b]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"menu",children:(w===N?g:y).map((function(t,c){return Object(f.jsx)(p,{text:t.text,values:t.values,current:e.currentSettingIdxs[c],action:t.action,isSelected:c===s},"".concat(c,"_").concat(e.currentSettingIdxs[c]))}))}),Object(f.jsx)(v,{isOpen:b,children:Object(f.jsxs)("div",{children:[Object(f.jsx)("br",{}),Object(f.jsx)("h3",{children:"1. Use Arrow Keys to Move."}),Object(f.jsx)("h3",{children:"2. Press ENTER to Pause."}),Object(f.jsx)("h3",{children:"3. Press ESC to End."}),Object(f.jsx)("br",{})]})})]})},H=(c(25),"INGAME"),y="HOME",A="STANDARD",C="NOWALL",I=function e(t,c,n){Object(i.a)(this,e),this.text=t,this.values=c,this.action=n},M=function(){var e=Object(n.useState)(y),t=Object(l.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)(0),s=Object(l.a)(a,2),i=s[0],u=s[1],j=Object(n.useState)(9),b=Object(l.a)(j,2),d=b[0],O=b[1],v=Object(n.useState)(1),h=Object(l.a)(v,2),w=h[0],x=h[1],m=Object(n.useState)([i,d,w]),S=Object(l.a)(m,2),p=S[0],N=S[1],k=Object(n.useState)(0),M=Object(l.a)(k,2),T=M[0],L=M[1],R=Object(n.useState)(new I("Map",[{text:"Standard",value:A},{text:"No Wall",value:C}],(function(e){return u(e)}))),D=Object(l.a)(R,1)[0],P=Object(n.useState)(new I("Speed",Object(o.a)(Array(21).keys()).map((function(e){return{text:e+1,value:e+1}})),(function(e){return O(e)}))),z=Object(l.a)(P,1)[0],W=Object(n.useState)(new I("Board Size",Object(o.a)(Array(4).keys()).map((function(e){return{text:"".concat(5*(e+2)," x ").concat(5*(e+2)),value:5*(e+2)}})),(function(e){return x(e)}))),U=Object(l.a)(W,1)[0];Object(n.useEffect)((function(){N([i,d,w])}),[i,d,w]);var F=function(){r(c===H?y:H)};return Object(f.jsx)("div",{className:"App",children:c===y?Object(f.jsx)(E,{viewHandler:F,settingItems:[D,z,U],currentSettingIdxs:p}):Object(f.jsx)(g,{hasWall:D.values[i].value===A,speed:z.values[d].value,boardSize:U.values[w].value,topScore:T,topScoreHandler:function(e){L(e)},viewHandler:F})})};s.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(M,{})}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.2777f1e6.chunk.js.map