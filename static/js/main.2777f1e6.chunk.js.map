{"version":3,"sources":["Board/Snake.js","Modal/Modal.jsx","Board/Board.jsx","lib/utils.js","Menu/Item.jsx","Menu/Menu.jsx","App.jsx","index.js"],"names":["Snake","getHead","length","getTail","addHead","value","push","removeTail","shift","Array","Modal","props","isOpen","className","children","Direction","getSnakeStartValue","board","rowSize","colSize","startRow","Math","round","startCol","row","col","cell","Board","boardSize","counter","currentRow","createBoard","useState","snake","setSnake","Set","snakeCells","setSnakeCells","direction","setDirection","foodCell","setFoodCell","score","setScore","stop","setStop","max","speed","hasWall","hasBoundary","isPauseOpen","setIsPauseOpen","isEnd","setIsEnd","handleRestart","useCallback","newSnake","getNextCoords","dir","newCoords","isOutOfBounds","coords","getCellClassName","cellValue","has","handleDirection","newDirection","nextHeadCoords","useEffect","handleKeydown","e","key","viewHandler","window","addEventListener","removeEventListener","size","topScore","topScoreHandler","callback","delay","savedCallback","useRef","current","id","setInterval","clearInterval","useInterval","moveSnake","handleGameOver","nextHeadCell","newSnakeCells","add","delete","handleFoodConsumption","maxCellValue","nextFoodCell","floor","random","s","buttonHandler","map","rowIdx","cellIdx","onClick","Item","curIdx","isSelected","values","action","undefined","text","MenuType","Menu","getMainItems","setMenuType","setSelected","setIsHelpOpen","getSettingItems","settingItems","selected","isHelpOpen","menuType","mainItems","setMainItems","items","item","idx","currentSettingIdxs","View","Map","Setting","this","App","view","setView","mapIdx","setMapIdx","speedIdx","setSpeedIdx","boardSizeIdx","setBoardSizeIdx","settingIdxs","setSettingIdx","setTopScore","i","mapSetting","keys","n","speedSetting","boardSizeSetting","handleView","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2777f1e6.chunk.js","sourcesContent":["class Snake extends Array {\n    getHead = () => this.length > 0 ? this[this.length - 1] : null;\n\n    getTail = () => this.length > 0 ? this[0] : null;\n\n    addHead = (value) => this.push(value);\n\n    removeTail = () => this.shift();\n}\n\nexport default Snake;","import React from 'react';\n\nimport './Modal.css';\n\nconst Modal = (props) => {\n\n    return (\n        props.isOpen &&\n        <div className='modal'>\n            <div className='modal-content'>\n                {props.children}\n            </div>\n        </div>\n    );\n};\n\nexport default Modal;","// Referenced from https://github.com/clementmihailescu/Snake-Game-Reverse-LL-Tutorial\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport {\n    useInterval,\n} from '../lib/utils.js';\n\nimport './Board.css';\nimport Snake from './Snake';\nimport Modal from '../Modal/Modal';\n\nconst SNAKE_MIN_SPEED = 1000;\nconst INITIAL_FOOD_DISTANCE = 5\n\nconst PAUSE_KEY = 'Enter';\nconst END_KEY = 'Escape';\nconst UP_KEY = 'ArrowUp';\nconst RIGHT_KEY = 'ArrowRight';\nconst DOWN_KEY = 'ArrowDown';\nconst LEFT_KEY = 'ArrowLeft';\n\nconst Direction = {\n    UP: 'UP',\n    RIGHT: 'RIGHT',\n    DOWN: 'DOWN',\n    LEFT: 'LEFT',\n};\n\nconst getSnakeStartValue = board => {\n    const rowSize = board.length;\n    const colSize = board[0].length;\n    const startRow = Math.round(rowSize / 3);\n    const startCol = Math.round(colSize / 3);\n    const startCell = board[startRow][startCol];\n    return {\n        row: startRow,\n        col: startCol,\n        cell: startCell,\n    };\n};\n\nconst getDirectionFromKey = key => {\n    if (key === UP_KEY) return Direction.UP;\n    else if (key === RIGHT_KEY) return Direction.RIGHT;\n    else if (key === DOWN_KEY) return Direction.DOWN;\n    else if (key === LEFT_KEY) return Direction.LEFT\n    else return null;\n}\n\nconst createBoard = boardSize => {\n    let counter = 1;\n    const board = [];\n    for (let row = 0; row < boardSize; row++) {\n        const currentRow = [];\n        for (let col = 0; col < boardSize; col++) {\n            currentRow.push(counter++);\n        }\n        board.push(currentRow);\n    }\n    return board\n}\n\nconst Board = (props) => {\n    const board = createBoard(props.boardSize);\n    const [snake, setSnake] = useState(new Snake(getSnakeStartValue(board)));\n    const [snakeCells, setSnakeCells] = useState(new Set([snake.getHead().cell]));\n    const [direction, setDirection] = useState(Direction.RIGHT);\n    const [foodCell, setFoodCell] = useState(snake.getHead().cell + INITIAL_FOOD_DISTANCE);\n    const [score, setScore] = useState(0);\n    const [stop, setStop] = useState(false);\n    const [speed,] = useState(Math.max(SNAKE_MIN_SPEED - (props.speed - 1) * 50, 10));\n    const [hasBoundary,] = useState(props.hasWall);\n    const [isPauseOpen, setIsPauseOpen] = useState(false);\n    const [isEnd, setIsEnd] = useState(false);\n\n    const handleRestart = useCallback(() => {\n        const newSnake = getSnakeStartValue(board);\n        setSnake(new Snake(newSnake));\n        setSnakeCells(new Set([newSnake.cell]));\n        setDirection(Direction.RIGHT);\n        setFoodCell(newSnake.cell + INITIAL_FOOD_DISTANCE)\n        setScore(0);\n    }, [board]);\n\n    const getNextCoords = useCallback((dir) => {\n        const newCoords = dir === Direction.UP ? {\n            row: snake.getHead().row - 1,\n            col: snake.getHead().col\n        } : dir === Direction.RIGHT ? {\n            row: snake.getHead().row,\n            col: snake.getHead().col + 1\n        } : dir === Direction.DOWN ? {\n            row: snake.getHead().row + 1,\n            col: snake.getHead().col\n        } : dir === Direction.LEFT ? {\n            row: snake.getHead().row,\n            col: snake.getHead().col - 1\n        } : {\n            row: snake.getHead().row,\n            col: snake.getHead().col\n        };\n        return hasBoundary ? newCoords : {\n            row: newCoords.row < 0 ? board.length - 1 : newCoords.row >= board.length ? 0 : newCoords.row,\n            col: newCoords.col < 0 ? board[0].length - 1 : newCoords.col >= board[0].length ? 0 : newCoords.col\n        };\n    }, [snake, board, hasBoundary]);\n\n    const isOutOfBounds = useCallback((coords) => {\n        const { row, col } = coords;\n        return row < 0 || col < 0 || row >= board.length || col >= board[0].length\n    }, [board]);\n\n    const getCellClassName = useCallback((cellValue) => {\n        if (snakeCells.has(cellValue)) return 'cell snake-cell';\n        else if (cellValue === foodCell) return 'cell food-cell';\n        else return 'cell';\n    }, [foodCell, snakeCells]);\n\n    const handleDirection = useCallback((newDirection) => {\n        // Ignore the cases\n        // 1. input key not arrow directions, or\n        // 2. the next cell is the same as the cell one after the haed \n        // when the snake's size is greater than one.\n        if (newDirection === null) return;\n\n        const nextHeadCoords = getNextCoords(newDirection);\n        if (!isOutOfBounds(nextHeadCoords) &&\n            snake.length > 1 &&\n            snake[snake.length - 2].cell === board[nextHeadCoords.row][nextHeadCoords.col]) {\n            return;\n        }\n\n        setDirection(newDirection);\n    }, [board, getNextCoords, isOutOfBounds, snake]);\n\n    // Handle keydown event.\n    useEffect(() => {\n        const handleKeydown = e => {\n            // Press Enter to pause or resume.\n            if (e.key === PAUSE_KEY) {\n                setStop(!stop);\n                if (isEnd) handleRestart();\n                setIsPauseOpen(!isPauseOpen);\n            } else if (e.key === END_KEY) {\n                props.viewHandler();\n            } else if (!stop) {\n                handleDirection(getDirectionFromKey(e.key));\n            }\n        };\n\n        window.addEventListener('keydown', handleKeydown);\n        return () => window.removeEventListener('keydown', handleKeydown);\n    }, [board, stop, direction, snakeCells.size, isPauseOpen, isEnd, handleRestart, handleDirection, props]);\n\n    // Handle scores\n    useEffect(() => {\n        if (score > props.topScore) props.topScoreHandler(score);\n    }, [score, props]);\n\n    // Handle snake's move.\n    useInterval(() => {\n        moveSnake();\n    }, !stop ? speed : null);\n\n    const moveSnake = () => {\n        const nextHeadCoords = getNextCoords(direction);\n\n        if (isOutOfBounds(nextHeadCoords) ||\n            snakeCells.has(board[nextHeadCoords.row][nextHeadCoords.col])) {\n            handleGameOver();\n            return;\n        }\n        const nextHeadCell = board[nextHeadCoords.row][nextHeadCoords.col];\n        const newSnake = new Snake(...snake);\n\n        newSnake.addHead({\n            row: nextHeadCoords.row,\n            col: nextHeadCoords.col,\n            cell: nextHeadCell\n        });\n\n        const newSnakeCells = new Set(snakeCells);\n        newSnakeCells.add(nextHeadCell);\n\n        if (nextHeadCell !== foodCell) {\n            newSnakeCells.delete(snake.getTail().cell);\n            newSnake.removeTail();\n        } else {\n            handleFoodConsumption(newSnakeCells);\n        }\n\n        setSnake(newSnake);\n        setSnakeCells(newSnakeCells);\n    };\n\n    const handleFoodConsumption = newSnakeCells => {\n        const maxCellValue = props.boardSize ** 2;\n        let nextFoodCell = null;\n        while (nextFoodCell === null || newSnakeCells.has(nextFoodCell)) {\n            nextFoodCell = Math.floor(Math.random() * maxCellValue + 1);\n        }\n        setFoodCell(nextFoodCell);\n        setScore(s => s + 1);\n    };\n\n    const handleGameOver = () => {\n        setStop(true);\n        setIsEnd(true);\n        setIsPauseOpen(true);\n    }\n\n    const buttonHandler = (dir) => {\n        handleDirection(dir);\n    }\n\n    return (\n        <>\n            <div className=\"board\">{\n                board.map((row, rowIdx) => (\n                    <div key={rowIdx} className=\"row\">{\n                        row.map((cellValue, cellIdx) => (\n                            <div\n                                key={cellIdx}\n                                className={getCellClassName(cellValue)}>\n                            </div>\n                        ))\n                    }</div>\n                ))\n            }\n                <div className=\"score-row\">\n                    <div className=\"score-cell\">\n                        <span>Score: {score}</span>\n                    </div>\n                    <div className=\"score-cell\">\n                        <span>Top Score: {props.topScore}</span>\n                    </div>\n                </div>\n            </div>\n            <div className=\"button-container\">\n                <div className=\"button-sub-container\">\n                    <button className=\"button-direction\" onClick={() => buttonHandler(Direction.UP)}>\n                        <div className=\"button-arrow button-up\"></div>\n                    </button>\n                </div>\n                <div className=\"button-sub-container\">\n                    <button className=\"button-direction\" onClick={() => buttonHandler(Direction.LEFT)}>\n                        <div className=\"button-arrow button-left\"></div>\n                    </button>\n                    <button className=\"button-direction\" onClick={() => buttonHandler(Direction.DOWN)}>\n                        <div className=\"button-arrow button-down\"></div>\n                    </button>\n                    <button className=\"button-direction\" onClick={() => buttonHandler(Direction.RIGHT)}>\n                        <div className=\"button-arrow button-right\"></div>\n                    </button>\n                </div>\n            </div>\n            <Modal isOpen={isPauseOpen}>\n                <div>\n                    <br></br>\n                    {isEnd && <h3>Your score: {score}</h3>}\n                    <h3>Press ENTER to {isEnd ? 'Restart' : 'Resume'}.</h3>\n                    <h3>Press ESC to End.</h3>\n                    <br></br>\n                </div>\n            </Modal>\n        </>\n    );\n};\n\nexport default Board;","import { useEffect, useRef } from 'react';\n\n// Copied from https://overreacted.io/making-setinterval-declarative-with-react-hooks/\nexport function useInterval(callback, delay) {\n    const savedCallback = useRef();\n\n    // Remember the latest callback.\n    useEffect(() => {\n        savedCallback.current = callback;\n    }, [callback]);\n\n    // Set up the interval.\n    useEffect(() => {\n        function tick() {\n            savedCallback.current();\n        }\n        if (delay !== null) {\n            let id = setInterval(tick, delay);\n            return () => clearInterval(id);\n        }\n    }, [delay]);\n}","import React, { useState, useEffect } from 'react';\n\nimport './Menu.css';\n\nconst RIGHT_KEY = 'ArrowRight';\nconst LEFT_KEY = 'ArrowLeft';\n\nconst Item = (props) => {\n    const [curIdx,] = useState(props.current ?? 0);\n\n    useEffect(() => {\n        const handleKeydown = e => {\n            if (props.isSelected && props.values) {\n                if (e.key === LEFT_KEY) {\n                    if (curIdx === 0) return;\n                    props.action(curIdx - 1);\n                } else if (e.key === RIGHT_KEY) {\n                    if (curIdx === props.values.length - 1) return;\n                    props.action(curIdx + 1);\n                }\n            }\n        };\n        window.addEventListener('keydown', handleKeydown);\n        return () => window.removeEventListener('keydown', handleKeydown);\n    }, [curIdx, props]);\n\n    return (\n        props.values === undefined ?\n            <div className={`item ${props.isSelected ? 'selected-item' : ''}`}>\n                <span>{props.text}</span>\n            </div> :\n            <div className={`item value-item ${props.isSelected ? 'selected-item' : ''}`}>\n                <div className=\"value-item-cell\">\n                    <span>{props.text}</span>\n                </div>\n                <div className=\"value-item-cell\">\n                    <div className={props.isSelected && curIdx > 0 ? 'arrow-left' : ''}></div>\n                    <span className=\"value-item-value\">{props.values[curIdx].text}</span>\n                    <div className={props.isSelected && curIdx < props.values.length - 1 ? 'arrow-right' : ''}></div>\n                </div>\n            </div>\n    );\n};\n\nexport default Item;","import React, { useState, useEffect, useCallback } from 'react';\nimport Modal from '../Modal/Modal';\nimport Item from './Item';\n\nimport './Menu.css';\n\nconst CONFIRM_KEY = 'Enter';\nconst UP_KEY = 'ArrowUp';\nconst DOWN_KEY = 'ArrowDown';\n\nconst MenuType = {\n    Main: 'MAIN',\n    Settings: 'SETTINGS'\n}\n\nconst Menu = (props) => {\n    const getMainItems = useCallback((isOpen) => [{\n        text: 'Start',\n        action: props.viewHandler\n    }, {\n        text: 'Settings',\n        action: () => {\n            setMenuType(MenuType.Settings);\n            setSelected(0);\n        }\n    }, {\n        text: 'Help',\n        action: () => setIsHelpOpen(!isOpen)\n    }], [props.viewHandler]);\n\n    const getSettingItems = useCallback(() => [...props.settingItems, {\n        text: 'Done',\n        action: () => {\n            setMenuType(MenuType.Main);\n            setSelected(1);\n        }\n    }], [props.settingItems]);\n\n    const [selected, setSelected] = useState(0);\n    const [isHelpOpen, setIsHelpOpen] = useState(false);\n    const [menuType, setMenuType] = useState(MenuType.Main);\n    const [mainItems, setMainItems] = useState(getMainItems(isHelpOpen));\n    const [settingItems,] = useState(getSettingItems());\n\n    useEffect(() => {\n        setMainItems(getMainItems(isHelpOpen));\n    }, [getMainItems, isHelpOpen]);\n\n    useEffect(() => {\n        const handleKeydown = e => {\n            const items = menuType === MenuType.Main ? mainItems : settingItems\n            if (e.key === CONFIRM_KEY) {\n                items[selected].action();\n            } else if (!isHelpOpen) {\n                if (e.key === UP_KEY) {\n                    if (selected === 0) return;\n                    setSelected(s => s - 1);\n                } else if (e.key === DOWN_KEY) {\n                    if (selected === items.length - 1) return;\n                    setSelected(selected + 1);\n                }\n            }\n        };\n\n        window.addEventListener('keydown', handleKeydown);\n        return () => window.removeEventListener('keydown', handleKeydown);\n    }, [selected, menuType, mainItems, settingItems, isHelpOpen]);\n\n    return (\n        <>\n            <div className='menu'>{\n                (menuType === MenuType.Main ? mainItems : settingItems).map((item, idx) => (\n                    <Item key={`${idx}_${props.currentSettingIdxs[idx]}`}\n                        text={item.text}\n                        values={item.values}\n                        current={props.currentSettingIdxs[idx]}\n                        action={item.action}\n                        isSelected={idx === selected}>\n                    </Item>))\n            }\n            </div>\n            <Modal isOpen={isHelpOpen}>\n                <div>\n                    <br></br>\n                    <h3>1. Use Arrow Keys to Move.</h3>\n                    <h3>2. Press ENTER to Pause.</h3>\n                    <h3>3. Press ESC to End.</h3>\n                    <br></br>\n                </div>\n            </Modal>\n        </>\n    );\n};\n\nexport default Menu;","import React, { useState, useEffect } from 'react';\nimport Board from './Board/Board';\nimport Menu from './Menu/Menu';\nimport './App.css';\n\nconst MAX_SPEED = 21;\nconst DEFAULT_MAP_IDX = 0;\nconst DEFAULT_SPEED_IDX = 9;\nconst DEFAULT_BOARD_IDX = 1;\n\n\nconst View = {\n  InGame: 'INGAME',\n  Home: 'HOME'\n};\n\nconst Map = {\n  Standard: 'STANDARD',\n  NoWall: 'NOWALL'\n}\n\nclass Setting {\n  constructor(text, values, action) {\n    this.text = text;\n    this.values = values;\n    this.action = action;\n  }\n}\n\nconst App = () => {\n  const [view, setView] = useState(View.Home);\n  const [mapIdx, setMapIdx] = useState(DEFAULT_MAP_IDX)\n  const [speedIdx, setSpeedIdx] = useState(DEFAULT_SPEED_IDX);\n  const [boardSizeIdx, setBoardSizeIdx] = useState(DEFAULT_BOARD_IDX);\n  const [settingIdxs, setSettingIdx] = useState([mapIdx, speedIdx, boardSizeIdx]);\n  const [topScore, setTopScore] = useState(0);\n  const [mapSetting,] = useState(\n    new Setting(\n      'Map',\n      [{ text: 'Standard', value: Map.Standard }, { text: 'No Wall', value: Map.NoWall }],\n      i => setMapIdx(i))\n  );\n  const [speedSetting,] = useState(\n    new Setting(\n      'Speed',\n      [...Array(MAX_SPEED).keys()].map(n => ({ text: n + 1, value: n + 1 })),\n      i => setSpeedIdx(i))\n  );\n  const [boardSizeSetting,] = useState(\n    new Setting(\n      'Board Size',\n      [...Array(4).keys()].map(n => ({ text: `${(n + 2) * 5} x ${(n + 2) * 5}`, value: (n + 2) * 5 })),\n      i => setBoardSizeIdx(i))\n  );\n\n  useEffect(() => {\n    setSettingIdx([mapIdx, speedIdx, boardSizeIdx])\n  }, [mapIdx, speedIdx, boardSizeIdx]);\n\n  const handleView = () => {\n    if (view === View.InGame) {\n      setView(View.Home);\n    } else {\n      setView(View.InGame);\n    }\n  };\n\n  const handleTopScore = (s) => { setTopScore(s); };\n\n  return (\n    <div className='App'>{\n      view === View.Home ?\n        <Menu\n          viewHandler={handleView}\n          settingItems={[mapSetting, speedSetting, boardSizeSetting]}\n          currentSettingIdxs={settingIdxs}>\n        </Menu> :\n        <Board\n          hasWall={mapSetting.values[mapIdx].value === Map.Standard}\n          speed={speedSetting.values[speedIdx].value}\n          boardSize={boardSizeSetting.values[boardSizeIdx].value}\n          topScore={topScore}\n          topScoreHandler={handleTopScore}\n          viewHandler={handleView}>\n        </Board>\n    }\n    </div>\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}